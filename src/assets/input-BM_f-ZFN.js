import{_ as S,r as v,J as k,R as I,b as V,d as M,c as n,o as u,a as g,e as q,z as m,n as y,A as p,F as B,l as E,I as _,f as N,T as R}from"./index-BuWtbWgA.js";const C={class:"input-container"},$={class:"input-wrapper"},w=["type","placeholder"],x={value:"",disabled:"",selected:""},z=["value"],A={key:2,class:"slot-container"},F={key:0,class:"error-message"},T={__name:"input",props:{label:{type:String,default:""},name:{type:String,default:""},error:{type:String,default:null},type:{type:String,default:"text"},modelValue:{type:[String,Number],default:""},required:{type:Boolean,default:!1},requiredMessage:{type:String,default:""},pattern:{type:RegExp,default:null},patternErrorMessage:{type:String,default:"输入格式不正确"},options:{type:Array,default:[]},placeholder:{type:String,default:""}},setup(l){const o=v(null),e=l,f=k(()=>e.requiredMessage||e.label?`${e.label}为必填项`:"此项为必填项"),t=v(null),i=a=>{const s=a.target.value;e.required&&!s?t.value=f:e.pattern&&!e.pattern.test(s)?t.value=e.patternErrorMessage:e.error?t.value=e.error:t.value=null},h=()=>{const a=o.value.value;return e.required&&!a?(t.value=f,!1):e.pattern&&!e.pattern.test(a)?(t.value=e.patternErrorMessage,!1):!0},d=I("form",null);let c;return V(()=>{e.modelValue&&(o.value.value=e.modelValue),d&&(c=d.registerInput({verify:h,getName:()=>e.name,getValue:()=>o.value.value}))}),M(()=>{d&&d.unregisterInput(c)}),(a,s)=>(u(),n("div",C,[g("div",$,[l.type!=="select"?(u(),n("input",{key:0,type:l.type,ref_key:"inputRef",ref:o,onInput:s[0]||(s[0]=r=>{i(r),a.$emit("update:modelValue",r.target.value)}),onBlur:i,placeholder:l.placeholder||l.label,class:y({"has-error":t.value})},null,42,w)):(u(),n("select",{key:1,ref_key:"inputRef",ref:o,onChange:s[1]||(s[1]=r=>{i(r),a.$emit("update:modelValue",r.target.value)}),onBlur:i,class:y({"has-error":t.value})},[g("option",x,p(l.placeholder||l.label),1),(u(!0),n(B,null,E(l.options,(r,b)=>(u(),n("option",{key:b,value:r.value},p(r.label),9,z))),128))],34)),a.$slots.append?(u(),n("div",A,[_(a.$slots,"append",{},void 0)])):m("",!0)]),q(R,{name:"error"},{default:N(()=>[t.value?(u(),n("span",F,p(t.value),1)):m("",!0)]),_:1})]))}},D=S(T,[["__scopeId","data-v-04e4b298"]]);export{D as I};
