import{I as r}from"./input-BM_f-ZFN.js";import{B as _}from"./button-lfGp2GGb.js";import{F as f,_ as g}from"./captcha-KePjXd6l.js";import{T as i}from"./toast-D-c1V8F9.js";import{_ as v,r as c,c as y,e as t,f as o,i as h,o as I,a as u,y as p,t as b,k as x}from"./index-BuWtbWgA.js";const k={class:"root"},w={class:"tips"},B={__name:"register",setup(C){const n=c(""),l=c(null),m=async a=>{if(a.verify){const[e,s]=await b("/api/v1/auth/Register",{Username:a.data.userName,Telephone:a.data.tel,Password:a.data.password,CaptchaID:n.value,Captcha:a.data.captcha});s?(console.error("注册失败",s),l.value.getCaptcha(),i("注册失败: "+(s.response.data.message||s.message||"未知错误"))):(i("注册成功"),x.replace({name:"login"}))}};return(a,e)=>{const s=h("router-link");return I(),y("div",k,[t(f,{onSubmit:m},{default:o(()=>[e[4]||(e[4]=u("span",{class:"title"},"注册",-1)),t(r,{class:"input",name:"userName",label:"昵称",type:"text",required:!0}),t(r,{class:"input",name:"tel",label:"电话",type:"tel",required:!0,pattern:/^1[3-9]\d{9}$/,patternErrorMessage:"请输入正确的中国大陆手机号码"}),t(r,{class:"input",name:"password",label:"密码",type:"password",required:!0,pattern:/^(?=.*[A-Za-z])(?=.*\d).{8,}$/,patternErrorMessage:"密码需8位以上且必须包含英文和数字"}),t(r,{class:"input",name:"captcha",label:"验证码",type:"text",required:!0,pattern:/^[a-zA-Z0-9]{4}$/,patternErrorMessage:"请输入正确的验证码"},{append:o(()=>[t(g,{captchaID:n.value,"onUpdate:captchaID":e[0]||(e[0]=d=>n.value=d),ref_key:"captchaRef",ref:l},null,8,["captchaID"])]),_:1}),t(_,{class:"action",type:"submit"},{default:o(()=>e[1]||(e[1]=[p("注册")])),_:1,__:[1]}),u("span",w,[e[3]||(e[3]=p("已有账号？")),t(s,{to:{name:"login"}},{default:o(()=>e[2]||(e[2]=[p("点击登录")])),_:1,__:[2]})])]),_:1,__:[4]})])}}},$=v(B,[["__scopeId","data-v-aa0ac303"]]);export{$ as default};
