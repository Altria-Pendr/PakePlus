import{B as S}from"./button-lfGp2GGb.js";import{I as w}from"./icons-BNI7CP4i.js";import{T as k}from"./toast-D-c1V8F9.js";import{W as L}from"./style-M5Mq9gkc.js";import{_ as x,r as v,b,t as C,d as B,c as u,o as i,e as m,f as p,a as l,T as _,z as h,m as F,F as I,l as $,q as M,j as T,B as W,g as A,A as D,C as O}from"./index-BuWtbWgA.js";import{g as U}from"./index-CH_iu5NA.js";import{c as V}from"./modal-B9HYtgKl.js";const q={class:"card"},E={style:{height:"100%",width:"100%"}},N=["src"],P={key:0,class:"card-loading"},j={class:"dot-box"},z={__name:"likeModal",props:{content:{type:String,required:!0},id:{type:String,required:!0}},setup(y){const c=y,o=v(),d=v([]),g=async a=>{for(;;){const[e,t]=await M(`/api/v1/mix_picture/${a}`);if(t)return[null,t];if(e.data.code!==200)return[null,{response:e}];if(e.data.result.finished)return[e.data.result.images_url[0],null];await new Promise(n=>setTimeout(n,1e3))}};let f;b(()=>{s(!0),C("/api/v1/user/clothes/FAVClothesPicture",{mix_id:c.id}).then(async([a,e])=>{if(!e){const[t,n]=await g(a.data.data.result.task_id);n||(o.value=t)}}),f=setInterval(()=>{s()},5e3)}),B(()=>{clearInterval(f)});const s=a=>{d.value.forEach((e,t)=>{if(!e){d.value.splice(t,1);return}const n=e.parentElement;U.to(e,{x:()=>{const r=n.clientWidth;return Math.random()*r-r/2-50},y:()=>{const r=n.clientHeight;return Math.random()*r-r/2-50},background:()=>{const r=["#FF5733","#FFC300","#DAF7A6","#3CB371","#6C3483"];return r[Math.floor(Math.random()*r.length)]},opacity:Math.random()*.5+.5,duration:a?0:7,ease:"power1.inOut",delay:a?0:Math.random()*2})})};return(a,e)=>(i(),u("div",q,[m(_,{name:"fade"},{default:p(()=>[l("div",E,[m(_,{name:"fade"},{default:p(()=>[o.value?(i(),u("div",{key:0,class:"img-before",style:F({backgroundImage:`url(${o.value})`})},null,4)):h("",!0)]),_:1}),m(_,{name:"fade"},{default:p(()=>[o.value?(i(),u("img",{key:0,src:o.value,class:"pic"},null,8,N)):h("",!0)]),_:1}),m(_,{name:"fade"},{default:p(()=>[o.value?h("",!0):(i(),u("div",P,[l("div",j,[(i(),u(I,null,$(6,t=>l("div",{class:"dot",key:t,ref_for:!0,ref:n=>d.value.push(n)})),64))]),e[0]||(e[0]=l("div",{class:"loader"},null,-1))]))]),_:1})])]),_:1})]))}},H=x(z,[["__scopeId","data-v-b95d34bf"]]),G={key:0,class:"tipsBox"},J=["onClick"],K={class:"buttonGroup"},Q={__name:"index",props:{isMobile:{type:Boolean,default:!1}},setup(y){const c=T(),o=v([]),d=async()=>{c.setLoadingStatus(!0);const[s,a]=await M("/api/v1/user/clothes/FavouriteList").finally(async()=>{c.setLoadingStatus(!1)});a||(o.value=Object.entries(s.data.data).map(([e,t])=>({id:t.mix_id,title:t.title})))};b(async()=>{await d()});const g=async s=>{c.setLoadingStatus(!0);const[a,e]=await C("/api/v1/user/clothes/FavouriteDelte",{mix_id:s}).finally(async()=>{c.setLoadingStatus(!1)});e?k("删除失败: "+(e.response.data.message||e.message||"未知错误")):(k("删除成功"),d())},f=s=>{V({title:s.title,content:O(H,{content:s.title,id:s.id}),closeOnClickOutside:!1}).open()};return(s,a)=>!o.value.length>0?(i(),u("div",G," 暂无已收藏搭配 ")):(i(),W(A(L),{key:1,list:o.value,class:"box"},{default:p(({item:e})=>[l("div",{class:"item",onClick:t=>f(e)},[l("div",null,D(e.title),1),l("div",K,[m(S,{class:"button",circle:!0,onClick:t=>g(e.id)},{default:p(()=>[m(w,{name:"trash-blank"})]),_:2},1032,["onClick"])])],8,J)]),_:1},8,["list"]))}},se=x(Q,[["__scopeId","data-v-faee402e"]]);export{se as default};
