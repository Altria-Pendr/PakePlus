import{_ as d,r as u,c as i,I as h,o as l,M as v,b as g,z as I,q as y}from"./index-BuWtbWgA.js";import{T as C}from"./toast-D-c1V8F9.js";const b={__name:"form",emits:["submit"],setup(_,{emit:m}){const a=u([]),c=u(null);v("form",{registerInput:e=>{const t=Symbol(e),n={id:t,input:e};return a.value.push(n),t},unregisterInput:e=>{a.value=a.value.filter(({inputId:t})=>t!==e)},handleSubmit:()=>{const e=a.value.every(({input:t})=>t.verify());r("submit",{verify:e,data:a.value.reduce((t,{input:n})=>{const f=n.getName();return t[f]=n.getValue(),t},{})})}});const r=m;return(e,t)=>(l(),i("form",{ref_key:"formRef",ref:c},[h(e.$slots,"default",{},void 0)],512))}},S=d(b,[["__scopeId","data-v-837c21f7"]]),k=["src"],w={__name:"captcha",emits:["update:captchaID"],setup(_,{expose:m,emit:a}){const c=u(""),s=u(""),p=a,o=async()=>{s.value="",c.value="";const[r,e]=await y("/api/v1/auth/GetCaptcha");if(e)console.error("获取验证码图片失败",e),C("获取验证码图片失败: "+(e.response.data.message||e.message||"未知错误"));else{const t=r.data.CaptchaID;c.value=t,s.value=r.data.Captcha,p("update:captchaID",t)}};return g(()=>{o()}),m({getCaptcha:o}),(r,e)=>s.value?(l(),i("img",{key:0,src:s.value,alt:"captcha",onClick:o},null,8,k)):I("",!0)}};export{S as F,w as _};
